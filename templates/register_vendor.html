<!DOCTYPE html>
<html>
<head>
    <title>Vendor Registration</title>
    <style>
        body { font-family: Arial; background: #f7f7f7; padding: 30px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; }
        input, select { width: 100%; padding: 8px; margin: 8px 0; box-sizing: border-box; }
        .row-group { display: flex; gap: 10px; }
        .row-group > div { flex: 1; }
        .buttons { display: flex; justify-content: space-between; margin-top: 20px; }
        button { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        .save { background-color: #28a745; color: white; }
        .cancel { background-color: #dc3545; color: white; }
        .back { background-color: #6c757d; color: white; }
        .toast { color: green; text-align: center; margin: 10px 0; }
    </style>
    <script>
        function addRow() {
            const row = document.querySelector('.comm-row').cloneNode(true);
            row.querySelectorAll('input').forEach(input => input.value = '');
            document.getElementById('comm-container').appendChild(row);
        }
        function removeRow(button) {
            const container = document.getElementById('comm-container');
            if (container.children.length > 1) {
                button.parentElement.parentElement.remove();
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h2>Vendor Registration</h2>
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="toast">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}
        <form method="POST">
            <h4>Vendor Details</h4>
            <input type="text" name="vendor_name" placeholder="Vendor Name" required>
            <input type="text" name="gst_number" placeholder="GST Number">
            <input type="text" name="vendor_type" placeholder="Vendor Type">

            <h4>Communication Details</h4>
            <div id="comm-container">
                <div class="comm-row">
                    <div class="row-group">
                        <div><input name="comm_name" placeholder="Name"></div>
                        <div><input name="comm_designation" placeholder="Designation"></div>
                        <div><input name="comm_phone" placeholder="Phone"></div>
                        <div><input name="comm_email" placeholder="Email"></div>
                        <div><button type="button" onclick="removeRow(this)">-</button></div>
                    </div>
                </div>
            </div>
            <button type="button" onclick="addRow()">+ Add Row</button>

            <h4>Bank Details</h4>
            <input type="text" name="account_holder" placeholder="Account Holder Name">
            <input type="text" name="account_number" placeholder="Account Number">
            <input type="text" name="ifsc" placeholder="IFSC Code">
            <input type="text" name="bank_name" placeholder="Bank Name">
            <input type="text" name="branch" placeholder="Branch">

            <div class="buttons">
                <button type="submit" class="save">Save</button>
                <a href="{{ url_for('cancel') }}"><button type="button" class="cancel">Cancel</button></a>
                <a href="{{ url_for('login') }}"><button type="button" class="back">Back</button></a>
            </div>
        </form>
    </div>
</body>
</html>
